;;;
"title": "Sharing WiFi&nbsp;On Linux",
"seo_title": "Sharing WiFi On Linux",
"date": "2017-10-28 12:35:11 UTC",
"abstract": [
  "This guide covers how to set up a WiFi hotspot on Linux using a single adapter.",
  "The scenario it aims to solve is one where only one device (for instance a laptop) is connected to a WiFi networked that has a whitelist of permitted MAC addresses. The connected device can then be used to create a hotspot that other devices can connect to for internet access."
]
;;;

<article>
  <h2 class="subtitle">1.Installing create_ap</h2>
  <p>To create a WiFi hotspot, we will make use of a handy script available on GitHub. It can be installed on Ubuntu by runnnig the following commands:</p>
<pre class="code-block"><code><span class="prompt">$ </span>git clone https://github.com/oblique/create_ap
<span class="prompt">$ </span>cd create_ap
<span class="prompt">$ </span>make install</code></pre>
<p>For other linux distros, take a look at the <a href="https://github.com/oblique/create_ap#installation">Installation guide</a>.</p>

  <h2 class="subtitle u-left-indent-2">2.Finding your wireless interface name</h2>
  <p>The next step (assuming your device is already connected to WiFi) is to find the name of your wireless interface. Run the following command in a console:</p>
<pre class="code-block"><code><span class="prompt">$ </span>iwconfig | grep SSID | awk '{print $1}'</code></pre>
  <p>This should print out a list of network interfaces with a note beside the ones that do not have an active connection. Running the above command on my laptop gave me the following output:</p>
<pre class="code-block"><code>enp9s0    no wireless extensions.
    
lo        no wireless extensions.

wlp8s0</code></pre>
  <p>Since I was connected to WiFi at the time, I was able to conclude that <code>wlp8s0</code> is the name of my wireless interface.</p>

  <h2 class="subtitle u-left-indent-2">3.Launching the hotspot</h2>
  <p>The hotspot can then be launched by running the following command, filling in the relevant fields:</p>
<pre class="code-block"><span class="prompt">$ </span><code>sudo create_ap <span class="code-emphasis">&lt;wireless_interface&gt;</span> <span class="code-emphasis">&lt;wireless_interface&gt;</span> <span class="code-emphasis">&lt;hotspot_name&gt;</span> <span class="code-emphasis">&lt;hotspot_password&gt;</span></code></pre>
  <p>In my case, the filled in command looks something like this:</p>
<pre class="code-block"><span class="prompt">$ </span><code>sudo create_ap wlp8s0 wlp8s0 MyHotspot MyPassword</code></pre>

  <h2 class="subtitle">Footnotes:</h2>
  <p>Since the script runs a process in the console, once the terminal is closed the hotspot will be closed as well. To circumvent this consider using a terminal multiplexer such as <a href="https://github.com/tmux/tmux/wiki">tmux</a> or <a href="https://www.gnu.org/software/screen/">screen</a>, which allows you to close a terminal and still have it running in the background.</p>
  <p>A simplified workflow using tmux is presented below:</p>
<pre class="code-block"><code><span class="code-comment"># Create a tmux session called <strong>hotspot</strong></span>
<span class="prompt">$ </span>tmux new -s hotspot

<span class="code-comment"># Run the hotspot (consider aliasing the command below)</span>
<span class="prompt">&gt; </span>sudo create_ap <span class="code-emphasis">&lt;wireless_interface&gt;</span> <span class="code-emphasis">&lt;wireless_interface&gt;</span> <span class="code-emphasis">&lt;hotspot_name&gt;</span> <span class="code-emphasis">&lt;hotspot_password&gt;</span>

<span class="code-comment"># Enter your user password when prompted</span></code></pre>
  <p>At this point you may close the terminal window. Alternatively, detach from the terminal by pressing <kbd>Ctrl</kbd>&nbsp;+&nbsp;<kbd>B</kbd> followed by <kbd>D</kbd>.</p>
  <p>If you wish to stop the hotspot manually, run the following command in any terminal to kill the tmux session named <strong>hotspot</strong>:</p>
<pre class="code-block"><code><span class="prompt">$ </span>tmux kill-session -t hotspot</code></pre>
    

  <h2 class="subtitle">Sources:</h2>
  <ul class="u-list references">
    <li><a href="https://askubuntu.com/a/324785/672916">[AskUbuntu] How do I create a WiFi hotspot sharing wireless internet connection (single adapter)?</a></li>
    <li><a href="https://github.com/oblique/create_ap#internet-sharing-from-the-same-wifi-interface">[Github] <strong>oblique/create_ap</strong> - A script that creates a NATed or Bridged WiFi Access Point</a></li>
  </ul>
</article>
